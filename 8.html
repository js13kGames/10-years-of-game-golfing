<input onchange="with(new FileReader)readAsArrayBuffer(files[0]),onload=s=>{play(new Uint8Array(result))}"type=file>
<p><canvas id=C width=64 height=32 value=C8PIC.ch8 style="width:320px;height:160px"></canvas>
<script>
play=function(rom){var imageData,audio,oscillator,i,memory,stack,pc,sp,I,timer,sound_timer,keys,keys_pressed,xhr,opcodes,tmp,opcode,interval,prefix,NNN,NN,N,X,Y,VX,VY,value,i,j,x,y;for(console.log(rom),imageData=(C=C.getContext("2d")).createImageData(64,32),i=8192;i--;)imageData.data[i]=i%4-3?0:255;for(audio=new(AudioContext=this.AudioContext||webkitAudioContext||0),memory=[],i=80;i--;)memory[i]=eval("0x"+"F999F26227F1F8FF1F1F99F11F8F1FF8F9FF1244F9F9FF9F1FF9F99E9E9EF888FE999EF8F8FF8F88"[i]+"0");for(V=new Uint8Array(new ArrayBuffer(16)),stack=[],pc=512,sp=0,I=0,timer=0,sound_timer=0,keys=[96,103,104,105,100,101,102,97,98,99,81,87,69,82,84,89],keys_pressed=[],i=rom.length;i--;)memory[i+512]=rom[i];interval=setInterval((function(){for(timer&&timer--,sound_timer&&sound_timer--,audio&&sound_timer&&!oscillator&&((oscillator=audio.createOscillator()).start||(oscillator.noteOn=oscillator.start),oscillator.stop||(oscillator.noteOff=oscillator.stop),oscillator.connect(audio.destination),oscillator.type=3,oscillator.start(0)),audio&&!sound_timer&&oscillator&&(oscillator.stop(0),oscillator=0),opcodes=4;opcodes--;){if(opcode=memory[pc]<<8|memory[pc+1],prefix=opcode>>12,NNN=4095&opcode,NN=255&opcode,N=15&opcode,X=opcode>>8&15,VX=V[X],VY=V[opcode>>4&15],224==opcode)for(i=8192;i--;)imageData.data[i]=i%4-3?0:255;if(238==opcode&&(pc=stack.pop()),1==prefix&&(pc=NNN-2),2==prefix&&(stack.push(pc),pc=NNN-2),(3==prefix&&VX==NN||4==prefix&&VX!=NN||5==prefix&&VX==VY||9==prefix&&VX!=VY||14==prefix&&(158==NN&&keys_pressed[VX]||161==NN&&!keys_pressed[VX]))&&(pc+=2),6==prefix&&(V[X]=NN),7==prefix&&(V[X]=VX+NN),8==prefix&&(N||(V[X]=VY),1==N&&(V[X]|=VY),2==N&&(V[X]&=VY),3==N&&(V[X]^=VY),4==N&&(V[15]=+((V[X]+=VY)>255)),5==N&&(V[15]=+((V[X]-=VY)>=0)),6==N&&(V[15]=1&VX,V[X]/=2),7==N&&(V[15]=+((V[X]=VY-VX)>=0)),14==N&&(V[15]=VX>>7,V[X]*=2)),10==prefix&&(I=NNN),11==prefix&&(pc=NNN+V[0]),12==prefix&&(V[X]=Math.floor(Math.random()*NN)),13==prefix)for(V[15]=0,i=N;i--;)for(j=8;j--;)value=memory[I+i]>>7-j&1,x=VX+j,y=VY+i,value&&(x>63&&(x-=63),y>31&&(y-=31),tmp=4*(64*y+x)+3,imageData.data[tmp]?imageData.data[tmp]=0:(imageData.data[tmp]=255,V[15]=1));if(15==prefix){if(7==NN&&(V[X]=timer),10==NN&&(~(V[X]=keys_pressed.indexOf(!0))||(pc-=2)),21==NN&&(timer=VX),24==NN&&(sound_timer=VX),30==NN&&(I+=VX,V[15]=+(I>4095),I&=4095),41==NN&&(I=5*VX),51==NN)for(i=3;i--;)memory[I+i]=(""+VX)[i];if(85==NN)for(i=X;i--;)memory[I+i]=V[i];if(101==NN)for(i=X;i--;)V[i]=memory[I+i]}pc+=2}C.putImageData(imageData,0,0)}),16)},onkeydown=function(e){keys_pressed[keys.indexOf(e.keyCode)]=!0},onkeyup=function(e){keys_pressed[keys.indexOf(e.keyCode)]=!1}
</script>